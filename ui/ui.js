// Generated by CoffeeScript 1.7.1
(function() {
  var DATA_MEMBERS_URL, DATA_SERVERS_URL, Member, Server, build, icon, load_data;

  DATA_MEMBERS_URL = 'data/members.json';

  DATA_SERVERS_URL = 'data/servers.json';

  build = function(klass) {
    return jQuery("<div></div>").addClass(klass);
  };

  icon = function(klass) {
    return jQuery("<i></i>").addClass("fa fa-" + klass);
  };

  load_data = function(url, klass) {
    return jQuery.ajax({
      url: url,
      type: 'GET',
      dataType: 'json',
      success: function(res) {
        var o, obj, _i, _len, _results;
        _results = [];
        for (_i = 0, _len = res.length; _i < _len; _i++) {
          obj = res[_i];
          o = new klass(obj);
          _results.push(o.render());
        }
        return _results;
      }
    });
  };

  Member = (function() {
    function Member(obj) {
      this.name = obj.name;
      this.realname = obj.realname;
      this.email = obj.email;
      this.avatar = obj.avatar;
      this.weibo = obj.weibo;
      this.zhihu = obj.zhihu;
      this.$members = jQuery('.page-members .members');
    }

    Member.prototype.render = function() {
      this.$elm = build('member').appendTo(this.$members).hide().fadeIn();
      this.$avatar = build('pie avatar s100 bordered').appendTo(this.$elm);
      this.$avatar_img = jQuery("<img />").attr('src', this.avatar).appendTo(this.$avatar);
      this.$name = build('name bold').html(this.name).appendTo(this.$elm);
      this.$email = build('email').html(this.email).prepend(icon('envelope-o')).appendTo(this.$elm);
      if (this.weibo) {
        this.$weibo = build('weibo').append(icon('weibo')).append("<a href='" + this.weibo + "' target='_blank'>" + this.weibo + "</a>").appendTo(this.$elm);
      }
      if (this.zhihu) {
        return this.$zhihu = build('zhihu').append(icon('zhihu')).append("<a href='" + this.zhihu + "' target='_blank'>" + this.zhihu + "</a>").appendTo(this.$elm);
      }
    };

    return Member;

  })();

  Server = (function() {
    function Server(obj) {
      this.id = obj.id;
      this.name = obj.name;
      this.nickname = obj.nickname;
      this.location = obj.location;
      this.ip = obj.ip;
      this.$servers = jQuery('.page-servers .servers');
    }

    Server.prototype.render = function() {
      this.$elm = build('server').appendTo(this.$servers).hide().fadeIn();
      this.$name = build('name').html(this.name).appendTo(this.$elm);
      this.$nickname = build('nickname').html(this.nickname).appendTo(this.$elm);
      this.$location = build('location').html(this.location).appendTo(this.$elm);
      return this.$ip = build('ip').html(this.ip).appendTo(this.$elm);
    };

    return Server;

  })();

  jQuery(function() {
    load_data(DATA_MEMBERS_URL, Member);
    return load_data(DATA_SERVERS_URL, Server);
  });

}).call(this);
